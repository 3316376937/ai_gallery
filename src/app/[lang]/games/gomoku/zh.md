
五子棋，是一种两人对弈的纯策略型棋类游戏，通常双方分别使用黑白两色的棋子，轮流下在棋盘直线与横线的交叉点上，先在横线、直线或斜对角线上形成5子连线者获胜。

五子棋在日本非常受人们欢迎，其起源可追溯到18世纪中叶。二条家的往来商人第十代桑名屋武右卫门非常擅长五子棋，因此这项游戏随后在民间传播开来。到了江户时代后期，大约在1850年左右，已经有关于五子棋的书籍出版。其中包括安政三年（1856年）出版的《五石定碛集》，该书是由被二条家赐予“松柳舍”家名的第十三代桑名屋武右卫门所著。早期的其他书籍还包括土井聱牙于安政五年（1847年）出版的《格五新谱》。[2][3]

自1899年日本棋士黑岩泪香证明了原始规则的五子棋先下必胜后，五子棋迈入一条不断改良的道路，经过数十年的修改、验证、再修改，最终发展出加入禁手的五子棋，并经过公开征名，称为连珠，因此规则在日本成型，又称为日式规则或连珠规则。

原始规则依然有人在玩，也被称为无禁规则、自由规则，有软件可验证黑棋先手必胜

- 连五：纵、横、斜线同色五子的紧连。
- 活四：两端都可形成连五的四。
- 冲四：仅一端能形成连五的四。除"活四"外的，再下一着棋便可形成五连，并且存在五连的可能性的局面。
- 活三：指可形成活四的三，分为连活三和跳活三。跳活三是指三颗棋子中有一颗是分开的，但仍然在五个空位内，虽然不如连续的活三直接，但仍然有很强的威胁性，比如  _0_00_ 这种。
- 长连：纵、横、斜线同色形成超过五子的连线。
- 禁手：黑子禁止下出双活三、双四、长连，下出则判败；

从原始规则演变的现代五子棋，主要是以有无禁手作为区别。主要分成无禁手的Gomoku规则及有禁手的Renju规则。

## 禁手

三三禁手：黑棋一子落下同时形成两个或者两个以上的活三（或嵌四），此子必须是**两个活三**的共同构成子。

## 实现

继续拆分。先单独实现一个连续活三的检测。对于一个落点，检查前、后两个点是否是是同一方，之后检测两段是否是空白的。比如落点 X，连续活三有两种情况：

```
_00X_
_X00_
```

在满足1 种的情况下就是活三。

## 特色

增加特效，鼠标悬浮到棋盘位置后，增加一个半透明的棋子在棋盘相应位置。
增加一个悔棋功能，支持黑白双方各悔棋 3 次。每次只能悔棋一步，不能悔多步。

我现在想加入先手禁手的规则。这里可以创建一个禁手判断的 js 组件。一旦先手触发禁手，则直接判失败。同时棋盘要显示触犯了什么禁手。


高亮导致禁手的所有棋子，不止最新落的棋子。